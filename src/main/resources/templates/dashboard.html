<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- üëà Important -->
  <title>Vault Dashboard</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg, #4a6cf7, #5ce1e6);
      margin: 0; padding: 0; min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
    }
    header {
      width: 100%; background: rgba(255,255,255,0.15);
      backdrop-filter: blur(8px);
      display: flex; justify-content: space-between;
      align-items: center; padding: 15px 25px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    header h2 { color: #fff; font-size: 1.4em; }
    .nav-links a {
      color: #fff; text-decoration: none; margin-left: 12px;
      font-weight: bold; font-size: 0.9em;
    }
    .nav-links a:hover { color: #d1e0ff; }

    main {
      background: #fff; border-radius: 15px;
      padding: 20px; width: 90%; max-width: 900px;
      margin-top: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      overflow-x: auto;
    }

    table {
      width: 100%; border-collapse: collapse; margin-top: 10px;
      font-size: 0.95em;
    }
    th, td { text-align: center; padding: 10px; }
    th { background: #4a6cf7; color: white; text-transform: uppercase; }
    tr:nth-child(even) { background-color: #f2f6ff; }
    tr:hover { background-color: #e8edff; }

    button {
      background: #4a6cf7; color: #fff;
      border: none; border-radius: 6px;
      padding: 6px 12px; margin: 2px;
      cursor: pointer; font-size: 0.9em;
    }
    button:hover { background: #3b5be0; }
    .delete-btn { background: #ff4757; }
    .delete-btn:hover { background: #e84118; }

    /* üîπ Responsive table layout for small screens */
    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr {
        display: block;
      }
      thead tr { display: none; }
      tr {
        margin-bottom: 15px;
        background: #f9f9ff;
        border-radius: 10px;
        padding: 10px;
      }
      td {
        text-align: left;
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid #ddd;
      }
      td:last-child { border-bottom: none; }
      td::before {
        content: attr(data-label);
        font-weight: bold;
      }
    }
  </style>
</head>
<body>
  <header>
    <h2>üîê Vault</h2>
    <div class="nav-links">
      <a href="/add">‚ûï Add</a>
      <a href="/logout">üîí Lock</a>
    </div>
  </header>

  <main>
    <h3 style="text-align:center;">Your Saved Credentials</h3>
    <div style="text-align:center; margin:10px;">
      <form action="/dashboard" method="get">
        <input type="text" name="q" placeholder="Search..." th:value="${param.q}"
               style="width:70%; max-width:300px; padding:8px; border-radius:6px; border:1px solid #ccc;">
        <button type="submit">Search</button>
      </form>
    </div>

    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Site</th>
          <th>Username</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="cred, iterStat : ${list}">
          <td data-label="#">[[${iterStat.index + 1}]]</td>
          <td data-label="Site">[[${cred.site}]]</td>
          <td data-label="Username">[[${cred.username}]]</td>
          <td data-label="Actions">
            <button type="button"
                    th:attr="onclick='openEditModal(' + ${iterStat.index} + ', \'' + ${cred.site} + '\', \'' + ${cred.username} + '\')'">
              ‚úèÔ∏è Edit
            </button>
            <form style="display:inline" method="post" action="/delete">
              <input type="hidden" name="idx" th:value="${iterStat.index}">
              <button type="submit" class="delete-btn">üóë</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </main>

  <!-- Modal omitted here for brevity -->
</body>
</html>
